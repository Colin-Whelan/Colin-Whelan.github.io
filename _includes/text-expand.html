<script>
    
    var elements = document.querySelectorAll('p');
    Array.prototype.forEach.call(elements, function(el, i){        
        if(el.outerHTML=='<p>[expand]</p>') {
        // console.log(el)
            el.outerHTML = '<div class="expand" style="display: none; height: 0; overflow: hidden;">';
        }
        if(el.outerHTML=='<p>[/expand]</p>') {
            // console.log(el)
            el.outerHTML = '</div>';
        }
    });

    var elements = document.querySelectorAll('div.expand');
    Array.prototype.forEach.call(elements, function(el, i){  
        if(el.outerHTML=='<div class="expand" style="display: none; height: 0; overflow: hidden;"></div>') {
        // console.log(el)
            el.innerHTML = el.nextSibling.nextSibling.innerHTML;
            el.nextSibling.nextSibling.innerHTML = ''
        }    
        console.log(el.nextSibling.nextSibling)

    });

    var elements = document.querySelectorAll('div.expand');
    Array.prototype.forEach.call(elements, function(el, i){
        el.previousElementSibling.innerHTML = el.previousElementSibling.innerHTML + '<span>&nbsp;&nbsp;&nbsp; <a style="cursor: pointer;" onclick="this.parentNode.parentNode.nextElementSibling.style.display = \'block\'; this.parentNode.parentNode.nextElementSibling.style.height = \'auto\'; this.parentNode.style.display = \'none\';">click&nbsp;to&nbsp;expand</a></span>';
    });

</script>